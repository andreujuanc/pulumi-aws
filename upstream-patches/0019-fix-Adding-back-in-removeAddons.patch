From 7fe1bb5f8430f11a5d21c39628124199656522ea Mon Sep 17 00:00:00 2001
From: Richard Shade <richard@pulumi.com>
Date: Fri, 6 Jan 2023 15:31:22 -0600
Subject: [PATCH 19/23] fix: Adding back in removeAddons

---
 internal/service/eks/cluster.go | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/internal/service/eks/cluster.go b/internal/service/eks/cluster.go
index a46211f0b0..289bf827e1 100644
--- a/internal/service/eks/cluster.go
+++ b/internal/service/eks/cluster.go
@@ -380,6 +380,10 @@ func resourceClusterCreate(ctx context.Context, d *schema.ResourceData, meta int
 		return diag.Errorf("waiting for EKS Cluster (%s) create: %s", d.Id(), err)
 	}
 
+	if err = removeAddons(d, conn); err != nil {
+		return diag.Errorf("removing addons (%s): %s", d.Id(), err)
+	}
+
 	return resourceClusterRead(ctx, d, meta)
 }
 
